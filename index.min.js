const applicationServerPublicKey='BACf2AL3ElM5rFuFoXZz7j6-lpaI5h2L5BvZWMPzQxDCKNEw5GYlu7Luf3xRyD33QgkkyBYSLy5xKM7H_pzdCCI=';function urlB64ToUint8Array(base64String){const padding='='.repeat((4-base64String.length%4)%4);const base64=(base64String+padding).replace(/\-/g,'+').replace(/_/g,'/');const rawData=window.atob(base64);const outputArray=new Uint8Array(rawData.length);for(let i=0;i<rawData.length;++i){outputArray[i]=rawData.charCodeAt(i);}
return outputArray;}
function subscribeUser(){const applicationServerKey=urlB64ToUint8Array(applicationServerPublicKey);window.serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:applicationServerKey}).then(function(subscription){console.log(JSON.stringify(subscription));isSubscribed=true;}).catch(function(err){console.log('Failed to subscribe the user: ',err);});}
function downloadAllArticles(){if(localStorage.getItem('offline')==='v8'){console.log("articles already downloaded");return;}
setTimeout(function(){window.caches.open('v8').then(function(cache){cache.addAll(["/","/page/2/","/page/3/","/page/4/","/page/5/","/tags/bohemian-browser-ballett/","/categories/","/categories/page/2/","/categories/page/3/","/kohlrabi/","/ecosia/","/categories/empfehlungen/","/tags/greta-thunberg/","/rede-greta-thunberg/","/tags/kosmetik/","/categories/lebensmittelverschwendung/","/tags/meer/","/protokoll/2019-11-19/","/protokoll/2019-10-24/","/categories/mensa-talk/","/mikroplastik-in-kosmetik/","/categories/plastik/","/categories/politik/","/protokoll/","/categories/protokoll/","/protokoll/2019-12-03/","/tags/satire/","/tags/suchmaschine/","/tags/","/tags/page/2/","/plastik-im-meer/","/shell/","/categories/aktuelles/","/datenschutzerklaerung/","/offline/","/impressum/","/infos/",]);}).then(event=>{localStorage.setItem('offline','v8');document.getElementById('toast-offline').classList.remove('d-none');new bootstrap.Toast(document.getElementById('toast-offline'),{delay:5000}).show();document.getElementById('toast-offline').addEventListener('hidden.bs.toast',function(){document.getElementById('toast-offline').remove();})}).catch(error=>{console.log("Fehler beim Offline gehen!",error);});},10000);}
if('serviceWorker'in navigator){console.log("service worker supported")
navigator.serviceWorker.register('/sw.min.js',{scope:'https://mohe2015.github.io/albertforfuture.de/'}).then((registration)=>{window.serviceWorkerRegistration=registration;console.log(registration);if(registration.active&&registration.active.state==='activated'){console.log(registration.active);downloadAllArticles();}
if(registration.installing){registration.installing.addEventListener('statechange',function(){console.log('[controllerchange][statechange] '+
'A "statechange" has occured: ',this.state);if(this.state==='activated'){downloadAllArticles();}});}
window.serviceWorkerRegistration.pushManager.getSubscription().then(function(subscription){isSubscribed=!(subscription===null);if(isSubscribed){console.log('User IS subscribed.');}else{console.log('User is NOT subscribed.');}
console.log(subscription);});console.log('Registration succeeded. Scope is '+registration.scope);}).catch((error)=>{console.log('Registration failed with '+error);});window.addEventListener('beforeinstallprompt',(e)=>{});if('PushManager'in window){console.log("push supported")}}
function status(response){if(response.status>=200&&response.status<300){return Promise.resolve(response)}else{return Promise.reject(new Error(response.statusText))}}
function text(response){return response.text()}